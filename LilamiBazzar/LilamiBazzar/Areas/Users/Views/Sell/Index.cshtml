@{
     ViewData["NoFooter"] = true;
}


<head>
    <style>
       
        .blow-out1 {
            height: 2px;
            background-color: #ccc;
            border: none;
            width: 50%; /* Adjust width as needed */
            margin: 0 auto; /* Center it horizontally */
        }
        .progressbar--nav-item::after {
            content: "";
            position: absolute;
            width: 100%;
            height: 2px;
            background-color: grey; /* White line initially */
            top: 8px;
            z-index: -1;
            left: 50%;
            transition: background-color 0.3s ease;
        }

        /* Red line after step is complete */
        .progressbar--nav-item.complete::after {
            background-color: #b30900;
        }

        .progressbar--nav-item:last-child::after {
            display: none; /* Hide the line after the last item */
        }

        .progressbar--nav {
            margin-top: 30px;
            padding: 0;
            font-size: 0;
            text-align: center;
            display: flex;
            justify-content: space-between;
        }

        .progressbar--nav-item {
            list-style-type: none;
            display: inline-block;
            vertical-align: top;
            width: 33.3%;
            position: relative;
            text-align: center;
        }

        .progressbar--nav-circle {
            position: relative;
            display: inline-block;
            width: 24px;
            height: 24px;
            line-height: 24px;
            border-radius: 50%;
            background: gray;
            color: #fff;
            font-weight: 600;
            font-size: 12px;
            text-align: center;
            transition: background 0.3s ease;
        }

        .active .progressbar--nav-circle,
        .complete .progressbar--nav-circle {
            background: #b30900;
        }

            .active .progressbar--nav-circle::before,
            .complete .progressbar--nav-circle::before {
                content: "";
                border: 2px solid #b30900;
                border-radius: 50%;
                height: 32px;
                width: 32px;
                position: absolute;
                left: 50%;
                top: 50%;
                transform: translate(-50%, -50%);
                box-sizing: content-box;
            }

        .progressbar--nav-item-text {
            display: block;
            font-size: 14px;
            font-weight: 500;
            color: #828282;
            margin-top: 10px;
        }

        .active .progressbar--nav-item-text,
        .complete .progressbar--nav-item-text {
            color: #b30900;
        }

        .progressbar {
            padding: 0;
            margin-bottom: 32px;
            width: 100%;
            max-width: 700px;
            margin: auto;
        }

        .form-container {
            display: none;
        }

            .form-container.active {
                display: block;
            }

        .form-button {
            margin-top: 20px;
            padding: 12px 24px;
            background-color: #b30900;
            color: #fff;
            border: none;
            cursor: pointer;
            font-size: 16px;
            border-radius: 5px;
            transition: background-color 0.3s ease;
        }

      ?

        h3 {
            font-size: 18px;
            margin-bottom: 10px;
        }

        label {
            display: block;
            margin: 10px 0 5px;
        }

        input[type="text"],
        input[type="file"] {
            width: 100%;
            padding: 8px;
            margin-top: 5px;
            border-radius: 4px;
            border: 1px solid #ccc;
        }
    </style>
</head>




<div class="text-center ae-top-icons--logo mt-4" style="padding-left:10px; font-size:24px;">
    <h>LilamiBazzar</h>
    <p class="heading-6">Get Ready to Auction Your Item</p>
</div>

<div class="row js-heading-blowout">
    <hr class="blow-out1 step--blowout">
</div>

<div class="progressbar col-xs-12 col-lg-6 col-lg-offset-3 js-overlay-control clearfix show">
    <ul class="progressbar--nav">
        <li data-name="step-1" class="js-progress-object-details step progressbar--nav-item active">
            <span class="progressbar--nav-circle"><span class="progressbar--nav-number">1</span></span>
            <span class="progressbar--nav-item-text">Tell us about your item</span>
        </li>
        <li data-name="step-2" class="js-progress-step-two step progressbar--nav-item">
            <span class="progressbar--nav-circle"><span class="progressbar--nav-number">2</span></span>
            <span class="progressbar--nav-item-text">Upload photos and documents</span>
        </li>
        <li data-name="step-3" class="js-progress-step-three step progressbar--nav-item">
            <span class="progressbar--nav-circle"><span class="progressbar--nav-number">3</span></span>
            <span class="progressbar--nav-item-text">Review and submit</span>
        </li>
    </ul>
</div>


<!-- Step 3: Review and Submit -->




 


<div class="container">
    <div class="row">
        <div class="col-xs-12 col-sm-7 mx-auto">
            <form id="auction-form">
                <!-- Step 1: Item Details -->
                <div class="tab-pane fade show active" id="item-details">
                    <div class="col-xs-12 no-padding text-center step--header">
                        <h2 class="heading-4 step--title js-step-header-title">Tell us about your item</h2>
                        <p class="p--primary js-step-header-description">All fields are required unless labeled as optional</p>
                    </div>

                    <div class="row js-heading-blowout">
                        <hr class="blow-out step--blowout">
                    </div>

                    <div class="form-group row align-items-center">
                        <label for="title" class="col-form-label col-sm-4 text-sm-center mb-0">Title</label>
                        <div class="col-sm-7">
                            <input type="text" autocomplete="off" class="form-control form-control-sm" name="artist_maker" placeholder="ex. Auction Product Title" maxlength="500" required id="title">
                        </div>
                    </div>
                    <br>

                    <div class="form-group row align-items-center">
                        <label for="description" class="col-form-label col-sm-4 text-sm-center mb-0">Description</label>
                        <div class="col-sm-7">
                            <input type="text" autocomplete="off" class="form-control" name="description" placeholder="Item title, medium/material, markings, labels, signatures" maxlength="500" required style="height: 100px;" id="description">
                        </div>
                    </div>
                    <br>

                    <div class="form-group row align-items-center">
                        <label for="dimensions" class="col-form-label col-sm-4 text-sm-center mb-0">Dimensions <span class="text-muted fst-italic">Optional</span></label>
                        <div class="col-sm-8 d-flex">
                            <input type="tel" pattern="[0-9]*" maxlength="6" class="form-control input-sm mr-2" name="width" placeholder="Width" id="width">
                            <p class="p--primary font_grey3 d-none d-sm-block align-self-center mx-2">X</p>
                            <input type="tel" pattern="[0-9]*" maxlength="6" class="form-control input-sm mr-2" name="height" placeholder="Height" id="height">
                            <p class="p--primary font_grey3 d-none d-sm-block align-self-center mx-2">X</p>
                            <input type="tel" pattern="[0-9]*" maxlength="6" class="form-control input-sm mr-2" name="length" placeholder="Depth" id="depth">
                            <select class="form-control input-sm ml-2" name="dimension_unit" id="dimension_unit">
                                <option disabled selected>Units</option>
                                <option value="1">cm</option>
                                <option value="2">in</option>
                                <option value="3">ft</option>
                                <option value="4">m</option>
                            </select>
                        </div>
                    </div>
                    <br>

                    <div class="form-group row align-items-center">
                        <label for="provenance" class="col-form-label col-sm-4 text-sm-center mb-0">Provenance</label>
                        <div class="col-sm-7">
                            <textarea type="text" autocomplete="off" class="form-control" name="provenance" placeholder="Where and when was the work acquired? Any known history of ownership prior to this?" maxlength="500" required style="height: 100px;" id="provenance"></textarea>
                        </div>
                    </div>
                    <br>

                    <div class="form-group row align-items-center">
                        <label for="location" class="col-form-label col-sm-4 text-sm-center mb-0">Location Of Item</label>
                        <div class="col-sm-7">
                            <input type="text" autocomplete="off" class="form-control form-control-sm" name="location_of_item" placeholder="ex. Pokhara" maxlength="500" required id="location">
                        </div>
                    </div>
                    <br>

                    <div class="form-group row align-items-center">
                        <label for="price" class="col-form-label col-sm-4 text-sm-center mb-0">Starting Bid</label>
                        <div class="col-sm-7">
                            <input type="text" autocomplete="off" class="form-control form-control-sm" name="starting_bid" placeholder="ex. Rs.100" maxlength="500" required id="price">
                        </div>
                    </div>
                    <br>

                    <div class="form-group row align-items-center">
                        <label for="auctionDuration" class="col-form-label col-sm-4 text-sm-center mb-0">Auction Duration</label>
                        <div class="col-sm-7">
                            <select class="form-control form-control-sm" name="auction_duration" id="auctionDuration" required>
                                <option value="" disabled selected>Select Duration</option>
                                <option value="1">1 Day</option>
                                <option value="3">3 Days</option>
                                <option value="7">7 Days</option>
                            </select>
                        </div>
                    </div>
                    <br>
                    <div class="form-group row align-items-center">
                        <label for="category" class="col-form-label col-sm-4 text-sm-center mb-0">Category</label>
                        <div class="col-sm-7">
                            <select id="mySelect" class="form-control form-control-sm" name="category" required>
                                <option value="">Select a category</option>
                            </select>
                        </div>
                    </div>
                    <br>

                    <div class="form-group row mb-3">
                        <div class="col-sm-12 text-center">
                            <button type="button" class="form-button" id="next-button">Next</button>
                        </div>
                    </div>
                </div>



         
            </form>
        </div>
    </div>
</div>


<script>
    $.ajax({
        url: '/Admin/Product/Category',
        method: 'GET',
        success: function (data) {
            $.each(data, function (index, item) {
                $('#mySelect').append(
                    $('<option></option>').val(item.id).text(item.name)
                );
            });
        },
        error: function (xhr, status, error) {
            console.error('Error fetching data:', error);
        }
    });
</script>

<div class="container">
    <div class="row" id="step2">
        <div class="col-xs-12 col-sm-7 mx-auto">
            <div class="tab-pane fade show active" id="upload-photo">
                <div class="col-xs-12 no-padding text-center step--header">
                    <h2 class="heading-4 step--title js-step-header-title">Upload photos and documents</h2>
                    @* <p class="p--primary js-step-header-description">All fields are required unless labeled as optional</p> *@
                </div>

                <div class="row js-heading-blowout">
                    <hr class="blow-out step--blowout">
                </div>

                <div class="container mt-5">
                    <h3>Upload photos</h3>
                    <p>Please upload three colour photos of your item</p>
                    <div class="row">
                        <!-- Front Image -->
                        <div class="col-md-4 mb-4">
                            <div class="card text-center p-3">
                                <label id="front-image-label" for="front-image-upload" class="d-block">
                                    <i class="bi bi-upload" style="font-size: 48px;"></i>
                                    <p>Example: front image<br>Maximum Size 10MB</p>
                                </label>
                                <input type="file" id="front-image-upload" class="d-none" accept="image/*" onchange="previewImage(event, 'front-image-preview', 'front-image-label', 'remove-front-image')">
                                <img id="front-image-preview" src="" alt="Front Image Preview" class="mt-2" style="display: none; max-width: 100%; height: auto;">
                                <button id="remove-front-image" class="btn btn-danger mt-2" style="display: none;" onclick="removeImage('front-image-preview', 'front-image-upload', 'front-image-label', 'remove-front-image')">Remove</button>
                            </div>
                        </div>

                        <!-- Back Image -->
                        <div class="col-md-4 mb-4">
                            <div class="card text-center p-3">
                                <label id="back-image-label" for="back-image-upload" class="d-block">
                                    <i class="bi bi-upload" style="font-size: 48px;"></i>
                                    <p>Example: back image<br>Maximum Size 10MB</p>
                                </label>
                                <input type="file" id="back-image-upload" class="d-none" accept="image/*" onchange="previewImage(event, 'back-image-preview', 'back-image-label', 'remove-back-image')">
                                <img id="back-image-preview" src="" alt="Back Image Preview" class="mt-2" style="display: none; max-width: 100%; height: auto;">
                                <button id="remove-back-image" class="btn btn-danger mt-2" style="display: none;" onclick="removeImage('back-image-preview', 'back-image-upload', 'back-image-label', 'remove-back-image')">Remove</button>
                            </div>
                        </div>

                        <!-- Signature Image -->
                        <div class="col-md-4 mb-4">
                            <div class="card text-center p-3">
                                <label id="signature-image-label" for="signature-image-upload" class="d-block">
                                    <i class="bi bi-upload" style="font-size: 48px;"></i>
                                    <p>Example: signature image<br>Maximum Size 10MB</p>
                                </label>
                                <input type="file" id="signature-image-upload" class="d-none" accept="image/*" onchange="previewImage(event, 'signature-image-preview', 'signature-image-label', 'remove-signature-image')">
                                <img id="signature-image-preview" src="" alt="Signature Image Preview" class="mt-2" style="display: none; max-width: 100%; height: auto;">
                                <button id="remove-signature-image" class="btn btn-danger mt-2" style="display: none;" onclick="removeImage('signature-image-preview', 'signature-image-upload', 'signature-image-label', 'remove-signature-image')">Remove</button>
                            </div>
                        </div>

                    </div>
                </div>

                <p style="font-size: 14px;">The size limit per file is 10MB</p>
                <p style="font-size: 14px;">Format types: JPG, PNG</p>

                <div class="row js-heading-blowout">
                    <hr class="blow-out step--blowout">
                </div>

                <div class="container mt-5">
                    <h3>Upload Documents <span class="text-muted fst-italic">Optional</span></h3>
                    <p>Documents may include receipts, authenticity certifications, and/or previous valuation statements about your item</p>
                    <div class="row">
                        <div class="col-sm-7">
                            <input type="file" autocomplete="off" class="form-control" name="artist_maker" placeholder="+Add document" maxlength="500" required style="width: 600px;" id="document1">
                        </div>

                        <br /><br />

                        <div>
                            <input type="file" autocomplete="off" class="form-control" name="artist_maker" placeholder="+Add document" maxlength="500" required style="width: 600px;" id="document2">
                        </div>

                        <br /><br />

                        <div>
                            <input type="file" autocomplete="off" class="form-control" name="artist_maker" placeholder="+Add document" maxlength="500" required style="width: 600px;" id="document3">
                        </div>
                    </div>

                    <br />
                    <p style="font-size: 14px;">We accept up to three documents per submission in the form of PDF, JPG, or PNG files</p>
                    <p style="font-size: 14px;">The size limit per document is 10MB</p>

                    <div class="row js-heading-blowout">
                        <hr class="blow-out step--blowout">
                    </div>

                    <div class="form-group row mb-3">
                        <div class="col-sm-12 text-center">
                            <button type="button" class="btn btn-outline-secondary mx-2" id="back-button">Back</button>

                            <button type="button" class="btn btn-primary" id="next-to-step3">Next</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>



<div class="container">
    <div id="step3" class="row">
        <div class="tab-pane fade show active" id="review-submit">
            <div class="row text-center my-4">
                <div class="col-12">
                    <h2 class="h4">Review and Submit</h2>
                    <p>Please review your details before submission.</p>
                </div>
            </div>
            <div class="row justify-content-center"id="review-submit1">
                <div class="col-12 col-sm-8">
                    <!-- Add review details here -->
                </div>

            </div>
            </br>
            </br>
            @if(User.Identity.IsAuthenticated)
            {
                <div class="form-group row mb-4">
                    <div class="col-12 text-center">
                        <button type="button" class="btn btn-outline-secondary mx-2" id="back-to-upload">Back</button>
                        <button type="submit" class="btn btn-primary mx-2" id="submitButton">Submit</button>
                    </div>
                </div>
            }
                else
                {
            <div class="form-group row mb-4">
                <div class="col-12 text-center">
                    <button type="button" class="btn btn-outline-secondary mx-2" id="back-to-upload">Back</button>
                        <button type="button" class="btn btn-primary mx-2 disabled" >Submit</button>
                </div>
            </div>
            <br />
            <h3>You need to log in before posting!</h3>

                }
         

                
        </div>
    </div>
</div>

<script>
    let auctionData = {};

    function previewImage(event, previewId, labelId, removeButtonId) {
        const input = event.target; // Get the file input
        const preview = document.getElementById(previewId); // Get the preview image element
        const label = document.getElementById(labelId); // Get the label element
        const removeButton = document.getElementById(removeButtonId); // Get the remove button

        if (input.files && input.files[0]) { // Check if a file is selected
            const reader = new FileReader(); // Create a FileReader object

            reader.onload = function (e) {
                preview.src = e.target.result; // Set the img src to the loaded file
                preview.style.display = 'block'; // Make the img visible
                label.style.display = 'none'; // Hide the label when an image is uploaded
                removeButton.style.display = 'block'; // Show the remove button
            };

            reader.readAsDataURL(input.files[0]); // Read the file as a data URL
        }
    }

    function removeImage(previewId, inputId, labelId, removeButtonId) {
        const preview = document.getElementById(previewId);
        const input = document.getElementById(inputId);
        const label = document.getElementById(labelId);
        const removeButton = document.getElementById(removeButtonId);

        // Reset the input and hide the preview
        input.value = '';
        preview.src = '';
        preview.style.display = 'none';
        label.style.display = 'block'; // Show the label again
        removeButton.style.display = 'none'; // Hide the remove button
    }

    function removeSignatureImage() {
        const preview = document.getElementById('signature-image-preview');
        const input = document.getElementById('signature-image-upload');
        const label = document.getElementById('signature-image-label');
        const removeButton = document.getElementById('remove-signature');

        // Reset the input and hide the preview
        input.value = '';
        preview.src = '';
        preview.style.display = 'none';
        label.style.display = 'block'; // Show the label again
        removeButton.style.display = 'none'; // Hide the remove button
    }


    function goToBack(backNumber) {
        // Hide all steps
        document.querySelectorAll('.form-container').forEach((form) => {
            form.classList.remove('active');
        });

        // Show the active step
        const activeStep = document.getElementById('step' + backNumber);
        activeStep.classList.add('active');

        // Update the progress bar
        document.querySelectorAll('.progressbar--nav-item').forEach((item, index) => {
            if (index < backNumber) {
                item.classList.add('complete'); // Mark previous steps as complete
            } else if (index === backNumber - 1) {
                item.classList.add('active'); // Mark current step as active
            } else {
                item.classList.remove('complete', 'active'); // Reset future steps
            }
        });
    }

    function goToStep(stepNumber) {
        // Hide all steps
        document.querySelectorAll('.form-container').forEach((form) => {
            form.classList.remove('active');
        });

        // Show the active step
        document.getElementById('step' + stepNumber).classList.add('active');

        // Update the progress bar
        document.querySelectorAll('.progressbar--nav-item').forEach((item, index) => {
            if (index < stepNumber - 1) {
                item.classList.add('complete');
                item.classList.remove('active');
            } else if (index === stepNumber - 1) {
                item.classList.add('active');
            } else {
                item.classList.remove('complete', 'active');
            }
        });

        if (stepNumber === 2) {
            auctionData.title = document.getElementById('title').value;
            auctionData.description = document.getElementById('description').value;
            auctionData.price = document.getElementById('price').value;

            // Validate fields before going to the next step
            // if (!auctionData.title || !auctionData.description || !auctionData.price) {
            //     alert("Please fill in all required fields.");
            //     return;
            // }
        }

        document.getElementById('signature-image-upload').addEventListener('change', function (event) {
            const input = event.target;
            if (input.files && input.files[0]) {
                auctionData.signatureImage = URL.createObjectURL(input.files[0]);
            }
        });
        // Display review data when going to step 3
        if (stepNumber === 3) {
            displayReviewData();
        }

    }

    function displayReviewData() {
       
        const reviewContainer = document.getElementById('review-submit1');
        reviewContainer.innerHTML = `
                <h3>Review Your Details</h3>
                <p><strong>Title:</strong> ${auctionData.title}</p>
                <p><strong>Description:</strong> ${auctionData.description}</p>
                <p><strong>Starting Bid:</strong> ${auctionData.price}</p>
                <p><strong>Signature Image:</strong></p>
                    <div style="padding-left: 10px;">
                <img src="${auctionData.signatureImage}" alt="Signature Image" style="max-width: 40%; height: auto;">
            </div>
            `;
    }
</script>





            
    </script>
    <script>
$(document).ready(function () {
    // Initially hide all sections except the first one
    $('#upload-photo').hide();
    $('#review-submit').hide();

    // Next button for Step 1
        $('#next-button').click(function () {
            let isValid = true;
            const requiredFields = ['#title', '#description', '#price', '#provenance', '#location', '#auctionDuration', '#category'];

            requiredFields.forEach(function (field) {
                const $field = $(field); // Store the jQuery object

                if ($field.length === 0) {
                    console.warn(`Element with ID ${field} does not exist.`);
                    return; // Skip if the field doesn't exist
                }

                // Check for empty values
                if (field === '#category') {
                    // Special check for the category dropdown
                    if ($field.val() === '') {
                        isValid = false;
                        $field.addClass('is-invalid'); // Add visual indication
                    } else {
                        $field.removeClass('is-invalid'); // Remove class if valid
                    }
                } else {
                    // General check for other input fields
                    if ($field.val().trim() === '') {
                        isValid = false;
                        $field.addClass('is-invalid'); // Add visual indication
                    } else {
                        $field.removeClass('is-invalid'); // Remove class if filled
                    }
                }
            });

            if (!isValid) {
                alert("Please fill in all required fields."); // Show error message
                return; // Stop further execution
            }

            // Proceed to the next step
            goToStep(2);
            $('#item-details').hide();
            $('#upload-photo').show();
        });


    // Back button for Step 2
    $('#back-button').click(function () {
        $('#upload-photo').hide(); // Hide current section
        $('#item-details').show(); // Show previous section

     
    });

    // Next button for Step 2
    $('#next-to-step3').click(function () {
       
            let isValid = true;
            const requiredFields = ['#front-image-upload', '#back-image-upload', '#signature-image-upload'];
            requiredFields.forEach(function (field) {
                if ($(field).val().trim() === '') {
                    isValid = false;
                    $(field).addClass('is-invalid'); // Optionally add a class for visual indication
                } else {
                    $(field).removeClass('is-invalid'); // Remove class if filled
                }
            });
            if (!isValid) {
                alert("Please fill in all required fields."); // Show error message
                return; // Stop further execution
            }
        goToStep(3);
            $('#upload-photo').hide(); // Hide current section
            $('#review-submit').show(); // Show next section

        
    });

    // Back button for Step 3
    $('#back-to-upload').click(function () {
        $('#review-submit').hide(); // Hide current section
        $('#upload-photo').show(); // Show previous section

    });
});


</script>

    <script>
        $(document).ready(function () {
            $('#submitButton').on('click', async function (e) {
                e.preventDefault();

                // Create FormData object
                var formData = new FormData();

                // Append file to FormData
                var frontImageFile = $('#front-image-upload')[0].files[0];
                if (frontImageFile) {
                    formData.append('Photos', frontImageFile);
                }
                var backImageFile = $('#back-image-upload')[0].files[0];
                if (backImageFile) {
                    formData.append('Photos', backImageFile);
                }
                var signatureImageFile = $('#signature-image-upload')[0].files[0];
                if (signatureImageFile){
                    formData.append('Photos', signatureImageFile);
                }
                var document1 = $('#document1')[0].files[0];
                if(document1)
                {
                    formData.append('Documents', document1);
                }
                var document2 = $('#document2')[0].files[0];
                if (document2) {
                    formData.append('Documents', document2);
                }
                var document3 = $('#document3')[0].files[0];
                if (document3) {
                    formData.append('Documents', document3);
                }
                debugger
                // Append other form fields to FormData
                formData.append('title', $('#title').val());
                formData.append('description', $('#description').val());
                formData.append('height', $('#height').val());
                formData.append('width', $('#width').val());
                formData.append('depth', $('#depth').val());
                formData.append('dimension_unit', $('#dimension_unit').val());
                formData.append('provenance', $('#provenance').val());
                formData.append('location', $('#location').val());
                formData.append('Startingprice', $('#price').val());
            formData.append('Days', Number($('#auctionDuration').val()));

                try {
                    // Await the result from AJAX call
                    var response = await $.ajax({
                        url: '/Admin/Product/Create', // Replace with your server endpoint
                        type: 'POST',
                        data: formData,
                        processData: false, // Prevent jQuery from automatically processing the data
                        contentType: false, // Prevent jQuery from automatically setting the content type
                    });

                    // Handle successful response
                    console.log('Upload successful:', response);

                    // Optionally, handle the response, e.g., redirecting the user
                    // window.location.href = "somePage.html"; // Example redirection

                } catch (error) {
                    // Handle any errors that occurred during the AJAX call
                    console.error('Upload failed:', error);
                }
            });
        });
    </script>








